{% extends 'base.html' %}
{% block title %}Contact - Happy Paws{% endblock %}
{% block content %}
<section class="hero small">
  <h1>Contact Us</h1>
  <p>Book a meet‑and‑sniff or ask us anything.</p>
</section>
<section class="container contact">
  <div class="contact-card">
    <h3>Let's talk paws</h3>
    <p><strong>Phone:</strong> (555) 123‑PAWS (7297)</p>
    <p><strong>Email:</strong> hello@happypawswalking.com</p>
    <p><strong>Hours:</strong> 7am – 7pm, every day</p>
    {% if submitted %}
      <div class="notice success">Thanks! Your enquiry has been sent.</div>
    {% elif error %}
      <div class="notice error">{{ error }}</div>
    {% endif %}
  </div>
  <form class="contact-form" method="post" action="{{ url_for('contact') }}">
    <input type="hidden" name="sid" id="sid-field" />
    <label>Name<input required name="name" placeholder="Your name" value="{{ form.name if form }}" /></label>
    <label>Email<input required type="email" name="email" placeholder="you@example.com" value="{{ form.email if form }}" /></label>
    <label>Dog's Name<input name="dog" placeholder="Your dog's name" value="{{ form.dog if form }}" /></label>
    <label>Message<textarea name="message" rows="5" placeholder="Tell us about your pup">{{ form.message if form }}</textarea></label>
    <button class="btn primary" type="submit">Send</button>
  </form>
</section>
{% endblock %}
{% block extra_js %}
<script>
// Assign a simple session id for tracking if not present
function getSID(){
  const m=document.cookie.match(/(?:^|; )sid=([^;]+)/);return m?decodeURIComponent(m[1]):null;
}
function setSID(){
  let sid=getSID();
  if(!sid){
    sid=crypto.randomUUID?crypto.randomUUID():Math.random().toString(36).slice(2);
    document.cookie='sid='+sid+';path=/;SameSite=Lax';
  }
  const el=document.getElementById('sid-field');
  if(el) el.value=sid;
}
setSID();
</script>
{% endblock %}
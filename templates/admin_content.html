{% extends 'base.html' %}
{% block title %}Website Settings{% endblock %}
{% block content %}
<div style="max-width:1000px;margin:0 auto;padding:20px 20px 0">
  <a href="{{ url_for('admin_dashboard') }}" style="display:inline-flex;align-items:center;gap:8px;padding:10px 20px;background:rgba(255,255,255,.08);border:1px solid rgba(255,255,255,.12);border-radius:10px;color:var(--text);text-decoration:none;font-weight:600;transition:all .2s;margin-bottom:20px" onmouseover="this.style.background='rgba(255,255,255,.12)';this.style.transform='translateX(-4px)'" onmouseout="this.style.background='rgba(255,255,255,.08)';this.style.transform='translateX(0)'">
    ‚Üê Back to Dashboard
  </a>
</div>
<section class="container" style="max-width:1000px">
  <h1 style="margin-bottom:10px">Website Settings</h1>
  <p style="margin-top:0;color:var(--muted)">Edit the services & pricing section displayed on the home page.</p>
  
  <!-- Maintenance Mode Toggle -->
  <div style="background:linear-gradient(180deg,rgba(245,158,11,.12),rgba(245,158,11,.06));border:2px solid rgba(245,158,11,.3);border-radius:16px;padding:24px;margin-top:24px;margin-bottom:32px">
    <div style="display:flex;align-items:center;justify-content:space-between;flex-wrap:wrap;gap:16px">
      <div>
        <h3 style="margin:0 0 8px;color:var(--accent-light);font-size:1.2rem">‚ö†Ô∏è Maintenance Mode</h3>
        <p style="margin:0;color:var(--text);font-size:.9rem">Display a warning banner at the top of all pages</p>
        <p style="margin:4px 0 0;color:var(--muted);font-size:.8rem">Message: "WEBSITE IS UNDER CONSTRUCTION - DO NOT PLACE ANY BOOKINGS"</p>
      </div>
      <form method="post" action="{{ url_for('admin_maintenance_toggle') }}" style="margin:0">
        <input type="hidden" name="enabled" value="{% if maintenance_mode_enabled %}false{% else %}true{% endif %}" />
        {% if maintenance_mode_enabled %}
        <button class="btn" type="submit" style="background:linear-gradient(135deg,#ef4444,#dc2626);color:#fff;padding:12px 24px;font-weight:700;white-space:nowrap">
          Turn OFF Maintenance Mode
        </button>
        {% else %}
        <button class="btn" type="submit" style="background:linear-gradient(135deg,var(--accent),var(--accent-light));color:#082621;padding:12px 24px;font-weight:700;white-space:nowrap">
          Turn ON Maintenance Mode
        </button>
        {% endif %}
      </form>
    </div>
    {% if maintenance_mode_enabled %}
    <div style="margin-top:16px;padding-top:16px;border-top:1px solid rgba(245,158,11,.2)">
      <div style="background:rgba(239,68,68,.15);border:1px solid rgba(239,68,68,.3);border-radius:10px;padding:12px;text-align:center">
        <strong style="color:#fca5a5;font-size:.9rem">üö® WARNING BANNER IS CURRENTLY ACTIVE ON ALL PAGES</strong>
      </div>
    </div>
    {% endif %}
  </div>
  
  <!-- Hero Images Editor -->
  <div style="background:linear-gradient(180deg,rgba(34,197,94,.08),rgba(34,197,94,.03));border:2px solid rgba(34,197,94,.25);border-radius:16px;padding:24px;margin-bottom:32px">
    <h3 style="margin:0 0 16px;color:var(--brand);font-size:1.2rem">üñºÔ∏è Hero Images</h3>
    <p style="margin:0 0 20px;color:var(--muted);font-size:.9rem">Change the images displayed in the hero slideshow and photo strip at the top of the homepage.</p>
    
    <form method="post" action="{{ url_for('admin_hero_images_update') }}">
      <div style="display:grid;gap:20px">
        <!-- Slideshow Images -->
        <div style="background:rgba(0,0,0,.2);border:1px solid rgba(255,255,255,.05);border-radius:12px;padding:16px">
          <h4 style="margin:0 0 12px;color:var(--text);font-size:1rem">Main Slideshow (2 images)</h4>
          <div style="display:grid;gap:12px">
            <label style="display:flex;flex-direction:column;gap:6px">
              <strong style="font-size:.85rem">Image 1 URL</strong>
              <input type="url" name="hero_slide_1" value="{{ hero_imgs.hero_slide_1 }}" placeholder="https://example.com/image1.jpg"
                style="padding:10px 12px;border-radius:10px;border:1px solid rgba(255,255,255,.16);background:rgba(255,255,255,.06);color:var(--text);font-size:.9rem" />
            </label>
            <label style="display:flex;flex-direction:column;gap:6px">
              <strong style="font-size:.85rem">Image 2 URL</strong>
              <input type="url" name="hero_slide_2" value="{{ hero_imgs.hero_slide_2 }}" placeholder="https://example.com/image2.jpg"
                style="padding:10px 12px;border-radius:10px;border:1px solid rgba(255,255,255,.16);background:rgba(255,255,255,.06);color:var(--text);font-size:.9rem" />
            </label>
          </div>
        </div>
        
        <!-- Photo Strip Images -->
        <div style="background:rgba(0,0,0,.2);border:1px solid rgba(255,255,255,.05);border-radius:12px;padding:16px">
          <h4 style="margin:0 0 12px;color:var(--text);font-size:1rem">Photo Strip (4 images)</h4>
          <div style="display:grid;grid-template-columns:repeat(auto-fit,minmax(280px,1fr));gap:12px">
            <label style="display:flex;flex-direction:column;gap:6px">
              <strong style="font-size:.85rem">Photo 1 URL</strong>
              <input type="url" name="hero_strip_1" value="{{ hero_imgs.hero_strip_1 }}" placeholder="https://example.com/photo1.jpg"
                style="padding:10px 12px;border-radius:10px;border:1px solid rgba(255,255,255,.16);background:rgba(255,255,255,.06);color:var(--text);font-size:.9rem" />
            </label>
            <label style="display:flex;flex-direction:column;gap:6px">
              <strong style="font-size:.85rem">Photo 2 URL</strong>
              <input type="url" name="hero_strip_2" value="{{ hero_imgs.hero_strip_2 }}" placeholder="https://example.com/photo2.jpg"
                style="padding:10px 12px;border-radius:10px;border:1px solid rgba(255,255,255,.16);background:rgba(255,255,255,.06);color:var(--text);font-size:.9rem" />
            </label>
            <label style="display:flex;flex-direction:column;gap:6px">
              <strong style="font-size:.85rem">Photo 3 URL</strong>
              <input type="url" name="hero_strip_3" value="{{ hero_imgs.hero_strip_3 }}" placeholder="https://example.com/photo3.jpg"
                style="padding:10px 12px;border-radius:10px;border:1px solid rgba(255,255,255,.16);background:rgba(255,255,255,.06);color:var(--text);font-size:.9rem" />
            </label>
            <label style="display:flex;flex-direction:column;gap:6px">
              <strong style="font-size:.85rem">Photo 4 URL</strong>
              <input type="url" name="hero_strip_4" value="{{ hero_imgs.hero_strip_4 }}" placeholder="https://example.com/photo4.jpg"
                style="padding:10px 12px;border-radius:10px;border:1px solid rgba(255,255,255,.16);background:rgba(255,255,255,.06);color:var(--text);font-size:.9rem" />
            </label>
          </div>
        </div>
      </div>
      
      <div style="margin-top:16px;text-align:right">
        <button class="btn primary" type="submit" style="padding:12px 24px;font-weight:700">Save Hero Images</button>
      </div>
    </form>
  </div>
  
  <!-- Meet Andy Section Editor -->
  <div style="background:linear-gradient(180deg,rgba(59,130,246,.08),rgba(59,130,246,.03));border:2px solid rgba(59,130,246,.25);border-radius:16px;padding:24px;margin-bottom:32px">
    <h3 style="margin:0 0 16px;color:#60a5fa;font-size:1.2rem">üë§ Meet Andy Section</h3>
    <p style="margin:0 0 20px;color:var(--muted);font-size:.9rem">Edit the heading, description paragraphs, and feature badges displayed in the About section.</p>
    
    <form method="post" action="{{ url_for('admin_meet_andy_update') }}">
      <div style="display:grid;gap:16px">
        <!-- Heading -->
        <label style="display:flex;flex-direction:column;gap:6px">
          <strong style="font-size:.9rem">Section Heading</strong>
          <input type="text" name="heading" value="{{ meet_andy.heading.content }}" required
            style="padding:12px 14px;border-radius:12px;border:1px solid rgba(255,255,255,.16);background:rgba(255,255,255,.06);color:var(--text);font-size:1rem" />
          <small style="color:var(--muted);font-size:.8rem">Main title for the About section (e.g., "Meet Andy")</small>
        </label>
        
        <!-- Paragraph 1 -->
        <label style="display:flex;flex-direction:column;gap:6px">
          <strong style="font-size:.9rem">First Paragraph</strong>
          <textarea name="paragraph1" rows="3" required
            style="padding:12px 14px;border-radius:12px;border:1px solid rgba(255,255,255,.16);background:rgba(255,255,255,.06);color:var(--text);font-size:1rem;font-family:inherit;line-height:1.6;resize:vertical">{{ meet_andy.paragraph1.content }}</textarea>
          <small style="color:var(--muted);font-size:.8rem">Introduction paragraph</small>
        </label>
        
        <!-- Paragraph 2 -->
        <label style="display:flex;flex-direction:column;gap:6px">
          <strong style="font-size:.9rem">Second Paragraph</strong>
          <textarea name="paragraph2" rows="3" required
            style="padding:12px 14px;border-radius:12px;border:1px solid rgba(255,255,255,.16);background:rgba(255,255,255,.06);color:var(--text);font-size:1rem;font-family:inherit;line-height:1.6;resize:vertical">{{ meet_andy.paragraph2.content }}</textarea>
          <small style="color:var(--muted);font-size:.8rem">Second paragraph with additional details</small>
        </label>
        
        <!-- Feature Badges -->
        <div style="background:rgba(0,0,0,.2);border:1px solid rgba(255,255,255,.05);border-radius:12px;padding:16px">
          <h4 style="margin:0 0 12px;color:var(--text);font-size:1rem">Feature Badges (4 items)</h4>
          <div style="display:grid;grid-template-columns:repeat(auto-fit,minmax(240px,1fr));gap:12px">
            <label style="display:flex;flex-direction:column;gap:6px">
              <strong style="font-size:.85rem">Badge 1</strong>
              <input type="text" name="badge1" value="{{ meet_andy.badge1.content }}" required
                style="padding:10px 12px;border-radius:10px;border:1px solid rgba(255,255,255,.16);background:rgba(255,255,255,.06);color:var(--text);font-size:.9rem" />
            </label>
            <label style="display:flex;flex-direction:column;gap:6px">
              <strong style="font-size:.85rem">Badge 2</strong>
              <input type="text" name="badge2" value="{{ meet_andy.badge2.content }}" required
                style="padding:10px 12px;border-radius:10px;border:1px solid rgba(255,255,255,.16);background:rgba(255,255,255,.06);color:var(--text);font-size:.9rem" />
            </label>
            <label style="display:flex;flex-direction:column;gap:6px">
              <strong style="font-size:.85rem">Badge 3</strong>
              <input type="text" name="badge3" value="{{ meet_andy.badge3.content }}" required
                style="padding:10px 12px;border-radius:10px;border:1px solid rgba(255,255,255,.16);background:rgba(255,255,255,.06);color:var(--text);font-size:.9rem" />
            </label>
            <label style="display:flex;flex-direction:column;gap:6px">
              <strong style="font-size:.85rem">Badge 4</strong>
              <input type="text" name="badge4" value="{{ meet_andy.badge4.content }}" required
                style="padding:10px 12px;border-radius:10px;border:1px solid rgba(255,255,255,.16);background:rgba(255,255,255,.06);color:var(--text);font-size:.9rem" />
            </label>
          </div>
          <small style="color:var(--muted);font-size:.8rem;display:block;margin-top:8px">Include checkmarks (‚úì) or emojis at the start of each badge text</small>
        </div>
      </div>
      
      <div style="margin-top:16px;text-align:right">
        <button class="btn primary" type="submit" style="padding:12px 24px;font-weight:700">Save Meet Andy Section</button>
      </div>
    </form>
  </div>
  
  <div style="margin-top:30px;display:flex;flex-direction:column;gap:24px">
    {% for service in services %}
    <div style="background:rgba(255,255,255,.04);border:1px solid rgba(255,255,255,.08);border-radius:16px;padding:24px">
      <form method="post" action="{{ url_for('admin_content_update', service_id=service.id) }}">
        <div style="display:flex;align-items:center;justify-content:space-between;margin-bottom:16px">
          <h3 style="margin:0;background:linear-gradient(135deg,var(--brand),var(--accent-light));-webkit-background-clip:text;background-clip:text;color:transparent">{{ service.title }}</h3>
          <button class="btn primary" type="submit">Save Changes</button>
        </div>
        
        <div style="display:grid;gap:16px">
          <label style="display:flex;flex-direction:column;gap:6px">
            <strong style="font-size:.9rem">Service Title</strong>
            <input type="text" name="title" value="{{ service.title }}" required
              style="padding:12px 14px;border-radius:12px;border:1px solid rgba(255,255,255,.16);background:rgba(255,255,255,.06);color:var(--text);font-size:1rem" />
          </label>
          
          <label style="display:flex;flex-direction:column;gap:6px">
            <strong style="font-size:.9rem">Price</strong>
            <input type="text" name="price" value="{{ service.price }}" placeholder="e.g., From ¬£14/hour"
              style="padding:12px 14px;border-radius:12px;border:1px solid rgba(255,255,255,.16);background:rgba(255,255,255,.06);color:var(--text);font-size:1rem" />
            <small style="color:var(--muted);font-size:.8rem">This appears at the top of the accordion panel</small>
          </label>
          
          <label style="display:flex;flex-direction:column;gap:6px">
            <strong style="font-size:.9rem">Description & Details</strong>
            <textarea name="content" rows="8" required
              style="padding:12px 14px;border-radius:12px;border:1px solid rgba(255,255,255,.16);background:rgba(255,255,255,.06);color:var(--text);font-size:1rem;font-family:inherit;line-height:1.6;resize:vertical">{{ service.content }}</textarea>
            <small style="color:var(--muted);font-size:.8rem">Use bullet points with "‚Ä¢" or "-" for lists. Each line will be displayed separately.</small>
          </label>
        </div>
        
        <div style="margin-top:12px;padding-top:16px;border-top:1px solid rgba(255,255,255,.08)">
          <details style="cursor:pointer">
            <summary style="font-weight:600;color:var(--accent-light);font-size:.9rem">Preview current content</summary>
            <div style="margin-top:12px;background:rgba(0,0,0,.2);border:1px solid rgba(255,255,255,.05);border-radius:10px;padding:16px">
              <p style="margin:0 0 8px;font-weight:700;color:var(--brand)">{{ service.price }}</p>
              {% set lines = service.content.split('\n') %}
              {% for line in lines %}
                {% if line.strip() %}
                  {% if line.strip().startswith('‚Ä¢') or line.strip().startswith('-') %}
                    <div style="margin-left:16px;font-size:.9rem;color:var(--text)">{{ line.strip() }}</div>
                  {% else %}
                    <p style="margin:8px 0;color:var(--text)">{{ line.strip() }}</p>
                  {% endif %}
                {% endif %}
              {% endfor %}
            </div>
          </details>
        </div>
      </form>
    </div>
    {% endfor %}
  </div>
</section>
{% endblock %}
